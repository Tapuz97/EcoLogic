<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EcoLogic ¬∑ Report</title>
  <link id="theme-css" rel="stylesheet" href="/assets/css/style_light.css" />
  <link rel="icon" type="image/svg+xml" href="/assets/logos/EcoIconSVG.svg" />
  <link rel="shortcut icon" type="image/svg+xml" href="/assets/logos/EcoIconSVG.svg" />
  <script src="/assets/js/CameraHandler.js" defer></script>
  <script src="/assets/js/ThemeToggle.js" defer></script>
  <script src="/assets/js/UserApp.js" defer></script>
  <meta name="theme-color" content="#4cd469" />
  <link rel="preload" href="/assets/Fonts/Frankfurter.ttf" as="font" type="font/ttf" crossorigin />
  <script>
    // injectSpeedInsights(); // Disabled for compatibility
  </script>
</head>

<body data-page="report" data-icon-base="/assets/icons/">
  <main class="container" role="main">
    <!-- Brand header -->
    <header class="app-brand" aria-label="EcoLogic">
      <img class="app-logo" src="/assets/logos/EcoIconSVG.svg" alt="EcoLogic logo" />
      <div class="brand-text">
        <div class="brand-name">EcoLogic</div>
        <div class="brand-tagline">Report, track, and redeem.</div>
      </div>
      <!-- Theme toggle button -->
      <button id="themeToggle" class="theme-toggle" aria-pressed="false" aria-label="Toggle theme">
        <span class="theme-toggle__icon theme-toggle__moon">üåô</span>
        <span class="theme-toggle__icon theme-toggle__sun">‚òÄÔ∏è</span>
        <div class="theme-toggle__knob"></div>
      </button>
    </header>

  <section class="welcome corner-fade" aria-labelledby="report-title">
    <div class="welcome-inner">
      <!-- LEFT: form/controls -->
      <div class="hero">
        <h1 id="report-title" class="h1">New Report</h1>
        <p class="sub">Take a photo, add a note (optional), and submit.</p>

        <div class="cta-row">
          <button class="btn btn-primary" type="button" id="openCameraBtn">
            <img class="inline-icon" src="/assets/icons/camera.svg" alt="" width="18" height="18" />
            Take Photo
          </button>
          <button class="btn" type="button" id="retakeBtn" hidden>Retake</button>
        </div>

        <!-- Hidden meta -->
        <form class="form" id="reportForm" autocomplete="on" style="margin-top:10px;">
          <input type="hidden" id="photoBlobField" name="photo_present" value="0" />
          <input type="hidden" id="timestampField" name="timestamp" />
          <input type="hidden" id="geoField" name="geo" />

          <div class="field">
            <label class="label" for="notes">Notes (optional)</label>
            <textarea class="input" id="notes" name="notes" rows="4"
              placeholder="Add details, behaviour, location hints‚Ä¶"></textarea>
          </div>

          <div class="cta-row">
            <button class="btn btn-primary" id="submitReportBtn" type="submit" disabled>Submit</button>
            <a class="btn btn-ghost" href="/User/home.html">Cancel</a>
          </div>

          <p class="sub" style="opacity:.75; font-size:12px;">
            We only upload the photo when you submit. Location is used if you allow it.
          </p>
        </form>
      </div>

      <!-- RIGHT: photo preview (hero-style) -->
      <div class="visual" id="photoPreviewWrap"
          style="min-height:220px; display:flex; align-items:center; justify-content:center;">
        <!-- Empty state (shown until a photo exists) -->
        <div id="photoEmpty"
            style="width:100%; aspect-ratio:16/10; border-radius:12px;
                    background:radial-gradient(120% 120% at 10% 0%, rgba(76,212,105,.18), transparent 60%),
                              var(--panel, #f5f7f6); display:flex; align-items:center; justify-content:center;
                    color:#3a5f49; font-weight:600; opacity:.7;">
          Photo preview will appear here
        </div>

        <!-- Actual photo -->
        <img id="photoPreview" alt="Captured photo preview"
            style="display:none; width:100%; aspect-ratio:16/10; object-fit:cover; border-radius:12px;" />
      </div>
    </div>
  </section>


    <!-- Recent reports (compact) -->
    <section class="recent" aria-labelledby="recent-title">
      <div class="recent-head">
        <h2 id="recent-title" class="h1" style="font-size:clamp(18px,3.4vw,22px);">Recent reports</h2>
        <a class="btn btn-ghost" href="/User/history.html">View all</a>
      </div>

      <ul class="report-list">
        <li class="report-item">
          <div class="report-main">
            <div class="report-where">Greenbelt Park ‚Äì Trail 3</div>
            <div class="report-when">Just now ¬∑ Flora</div>
          </div>
          <div class="report-side">
            <span class="status status-approved">Approved</span>
            <span class="report-coins">+30</span>
          </div>
        </li>
        <li class="report-item">
          <div class="report-main">
            <div class="report-where">Riverside Wetlands</div>
            <div class="report-when">Yesterday ¬∑ Wildlife</div>
          </div>
          <div class="report-side">
            <span class="status status-pending">Pending</span>
            <span class="report-coins">+20</span>
          </div>
        </li>
        <li class="report-item">
          <div class="report-main">
            <div class="report-where">City Arboretum</div>
            <div class="report-when">2 days ago ¬∑ Photo</div>
          </div>
          <div class="report-side">
            <span class="status status-denied">Denied</span>
            <span class="report-coins">+0</span>
          </div>
        </li>
      </ul>
    </section>
  </main>

  <!-- Bottom nav (no camera tab) -->
  <nav class="nav" aria-label="Primary">
    <div class="nav-inner">
      <a href="/User/home.html">
        <img class="nav-icon" data-icon="house" alt="" />
        <span class="label">Home</span>
      </a>
      <a href="/User/report.html" aria-current="page">
        <img class="nav-icon" data-icon="doc" alt="" />
        <span class="label">Report</span>
      </a>
      <a href="/User/shop.html">
        <img class="nav-icon" data-icon="bag" alt="" />
        <span class="label">Shop</span>
      </a>
      <a href="/User/profile.html">
        <img class="nav-icon" data-icon="user" alt="" />
        <span class="label">Profile</span>
      </a>
    </div>
  </nav>


</body>
</html>



